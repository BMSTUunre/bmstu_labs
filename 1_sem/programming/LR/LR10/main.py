"""
–õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—é ‚Ññ10
1 —Å–µ–º–µ—Å—Ç—Ä; –Ω–æ—è–±—Ä—å 2024 –≥–æ–¥–∞
–ö–æ—Ä–æ—Å—Ç—ã–ª–µ–≤ –ï–≥–æ—Ä –ò–£7-14–ë

–ó–∞–¥–∞—á–∞:
    1. –í—ã—á–∏—Å–ª–∏—Ç—å –∏–Ω—Ç–µ–≥—Ä–∞–ª –∑–∞–¥–∞–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ –¥–≤—É–º—è –º–µ—Ç–æ–¥–∞–º–∏ (—Å–µ—Ä–µ–¥–∏–Ω–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –∏ –ø–∞—Ä–∞–±–æ–ª)

    2. –ü—Ä–æ–≥—Ä–∞–º–º–∞ –¥–æ–ª–∂–Ω–∞ –ø–æ–∑–≤–æ–ª—è—Ç—å –∑–∞–¥–∞—Ç—å –Ω–∞—á–∞–ª–æ –∏ –∫–æ–Ω–µ—Ü –æ—Ç—Ä–µ–∑–∫–∞ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è, –∞ —Ç–∞–∫–∂–µ
        N1 –∏ N2 - –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ —É—á–∞—Å—Ç–∫–æ–≤ —Ä–∞–∑–±–∏–µ–Ω–∏—è.

    3. –ü–æ—Å—Ç—Ä–æ–∏—Ç—å —Ç–∞–±–ª–∏—Ü—É –ø–æ –º–µ—Ç–æ–¥–∞–º –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –æ—Ç—Ä–µ–∑–∫–æ–≤

    4. –ù–∞ –æ—Å–Ω–æ–≤–µ –∏–∑–≤–µ—Å—Ç–Ω–æ–π –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π, –≤—ã—á–∏—Å–ª–∏—Ç—å –∫–∞–∫–æ–π –º–µ—Ç–æ–¥ –±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–π:
        4.1 –í—ã—á–∏—Å–ª–∏—Ç—å –∞–±—Å–æ–ª—é—Ç–Ω—É—é –∏ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—É—é –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç–∏ –¥–ª—è –≤—Å–µ—Ö 4-—Ö –∏–∑–º–µ—Ä–µ–Ω–∏–π, –≤—ã–≤–µ—Å—Ç–∏ –∏—Ö
        4.2 –ú–µ—Ç–æ–¥, –∏–∑–º–µ—Ä–µ–Ω–∏–µ –∫–æ—Ç–æ—Ä–æ–≥–æ —Å –æ–¥–Ω–∏–º –∏–∑ —Ä–∞–∑–±–∏–µ–Ω–∏–π –¥–∞–ª–æ —Å–∞–º–æ–µ –±–ª–∏–∑–∫–æ–µ –∫ –ø–µ—Ä–≤–æ–æ–±—Ä–∞–∑–Ω–æ–π
            –∑–Ω–∞—á–µ–Ω–∏–µ, —Å—á–∏—Ç–∞–µ—Ç—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º.

    5. –ó–∞—Ç–µ–º –¥–ª—è –¥—Ä—É–≥–æ–≥–æ, –º–µ–Ω–µ–µ —Ç–æ—á–Ω–æ–≥–æ –º–µ—Ç–æ–¥–∞, –∏—Ç–µ—Ä–∞—Ü–∏–æ–Ω–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —É—á–∞—Å—Ç–∫–æ–≤
        —Ä–∞–∑–±–∏–µ–Ω–∏—è, –¥–ª—è –∫–æ—Ç–æ—Ä–æ–≥–æ –∏–Ω—Ç–µ–≥—Ä–∞–ª –±—É–¥–µ—Ç –≤—ã—á–∏—Å–ª–µ–Ω —Å –∑–∞–¥–∞–Ω–Ω–æ–π —Ç–æ—á–Ω–æ—Å—Ç—å—é, –Ω–∞ –æ—Å–Ω–æ–≤–µ
        —Ñ–æ—Ä–º—É–ª—ã:
                |ùêº(ùëÅ) ‚àí ùêº(2ùëÅ)| < Œµ

    6. –í—ã–≤–µ—Å—Ç–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ –∏ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç—Ä–µ–∑–∫–æ–≤, –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã—Ö –¥–ª—è
        –µ–≥–æ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è.

"""

from utils import input_int, input_float, draw_table, calc_error
from integral_utils import middle_rectangles, parabola, integral_by_antiderivative, iteration_calc_n


def main():
    print('–ù–∞–¥–µ—é—Å—å –≤—ã –∑–∞–¥–∞–ª–∏ —Ñ—É–Ω–∫—Ü–∏—é –≤ –Ω—É–∂–Ω–æ–º —Ñ–∞–π–ªe..')

    start, stop = input_float('–í–≤–µ–¥–∏—Ç–µ –Ω–∞—á–∞–ª–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è\n> '), input_float('–í–≤–µ–¥–∏—Ç–µ –∫–æ–Ω–µ—Ü –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∏—è\n> ')
    n1, n2 = input_int('–í–≤–µ–¥–∏—Ç–µ N1 —É—á–∞—Å—Ç–∫–æ–≤ —Ä–∞–∑–±–∏–µ–Ω–∏—è\n> '), input_int('–í–≤–µ–¥–∏—Ç–µ N2 —É—á–∞—Å—Ç–∫–æ–≤ —Ä–∞–∑–±–∏–µ–Ω–∏—è\n> ')

    rect1, rect2 = middle_rectangles(n1, start, stop), middle_rectangles(n2, start, stop)
    par1, par2 = parabola(n1, start, stop), parabola(n2, start, stop)

    print('–í—ã—á–∏—Å–ª–µ–Ω–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞.')
    draw_table(n1, n2, rect1, rect2, par1, par2)

    true_value = integral_by_antiderivative(start, stop)
    print('–ù–∞—Å—Ç–æ—è—â–µ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞: {:.12f}'.format(true_value))

    rect1_err = calc_error(rect1, true_value)
    rect2_err = calc_error(rect2, true_value)
    par1_err = calc_error(par1, true_value)
    par2_err = calc_error(par2, true_value)

    print('\n–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–∞ —Å–µ—Ä–µ–¥–∏–Ω–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤:')
    print('–ü–µ—Ä–≤–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ: –æ—Ç–Ω. {:.10f}  –∞–±—Å. {:>10f} %'.format(*rect1_err))
    print('–í—Ç–æ—Ä–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ: –æ—Ç–Ω. {:.10f}  –∞–±—Å. {:>10f} %'.format(*rect2_err))

    print('\n–û—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–≥—Ä–µ—à–Ω–æ—Å—Ç—å –º–µ—Ç–æ–¥–∞ –ø–∞—Ä–∞–±–æ–ª:')
    print('–ü–µ—Ä–≤–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ: –æ—Ç–Ω. {:.10f}   –∞–±—Å. {:>10f} %'.format(*par1_err))
    print('–í—Ç–æ—Ä–æ–µ –∏–∑–º–µ—Ä–µ–Ω–∏–µ: –æ—Ç–Ω. {:.10f}   a–±—Å. {:>10f} %'.format(*par2_err))

    best_calc = min(rect1_err[0], rect2_err[0], par1_err[0], par2_err[0])


    if par1_err[0] == best_calc or par2_err[0] == best_calc:
        print("\n–ú–µ—Ç–æ–¥ –ø–∞—Ä–∞–±–æ–ª (–º–µ—Ç–æ–¥ –°–∏–º–ø—Å–æ–Ω–∞) –æ–∫–∞–∑–∞–ª—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º.")
        calc_n = iteration_calc_n(0, start, stop)
        new_value = middle_rectangles(calc_n, start, stop)

    else:
        print("\n–ú–µ—Ç–æ–¥ —Å–µ—Ä–µ–¥–∏–Ω–Ω—ã—Ö –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫–æ–≤ –æ–∫–∞–∑–∞–ª—Å—è –Ω–∞–∏–±–æ–ª–µ–µ —Ç–æ—á–Ω—ã–º.")
        calc_n = iteration_calc_n(1, start, stop)
        new_value = parabola(calc_n, start, stop)

    print('\n–ü—Ä–∏–±–ª–∏–∂–µ–Ω–Ω–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞–ª–∞ : {:.10f}'.format(new_value))
    print(f'–ö–æ—Ç–æ—Ä–æ–µ —É–¥–∞–ª–æ—Å—å –≤—ã—á–∏—Å–ª–∏—Ç—å –∑–∞ –∫–æ–ª-–≤–æ –æ—Ç—Ä–µ–∑–∫–æ–≤ —Ä–∞–≤–Ω–æ–µ : {calc_n}')


if __name__ == '__main__':
    main()